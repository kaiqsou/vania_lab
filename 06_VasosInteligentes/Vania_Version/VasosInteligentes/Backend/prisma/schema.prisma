// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL") // você já configurou isso
}

model Usuario {
  id       Int      @id @default(autoincrement())
  nome     String
  email    String   @unique
  senha    String
  perfil   Perfil   @default(User)
  vasos    Vaso[]
  criadoEm DateTime @default(now())

  @@map("usuarios")
}

model Vaso {
  id           Int       @id @default(autoincrement())
  nome         String
  descricao    String?
  fotoUrl      String?
  usuario      Usuario   @relation(fields: [usuarioId], references: [id])
  usuarioId    Int
  leituras     Leitura[]
  criadoEm     DateTime  @default(now())

  @@map("vasos")
}

model Leitura {
  id        Int      @id @default(autoincrement())
  vaso      Vaso     @relation(fields: [vasoId], references: [id])
  vasoId    Int
  umidade   Float
  criadaEm  DateTime @default(now())

  @@map("leituras")
}

enum Perfil {
  Admin
  User
}
